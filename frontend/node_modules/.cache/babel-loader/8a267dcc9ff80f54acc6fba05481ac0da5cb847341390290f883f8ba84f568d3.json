{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import Navbar from\"../../components/Navbar\";import Heading from\"../../components/Heading\";import CategoryList from\"../../components/CategoryList\";import Footer from\"../../components/Footer\";import Loading from\"../../components/Loading\";import categoryService from\"../../services/categoryService\";import SuccessToast from\"../../components/SuccessToast\";import ErrorToast from\"../../components/ErrorToast\";import AddEditCategoryModal from\"../../components/AddEditCategoryModal\";import DeleteCategoryModal from\"../../components/DeleteCategoryModal\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function CategoriesPage(){const user=JSON.parse(localStorage.getItem(\"user\"));const[categories,setCategories]=useState([]);const[addCategory,setAddCategory]=useState();const[editCategory,setEditCategory]=useState();const[deleteCategory,setDeleteCategory]=useState();const[loading,setLoading]=useState();const[message,setMessage]=useState();const[isSuccess,setIsSuccess]=useState();const[isError,setIsError]=useState();useEffect(()=>{const fetchData=async()=>{try{setLoading(true);const categoriesRes=await categoryService.fetchCategories();setCategories(categoriesRes.data);setLoading(false);}catch(err){setIsError(true);setMessage(err);setLoading(false);}};fetchData();},[]);const onCategoryAdd=()=>{setAddCategory({title:\"\",description:\"\",color:\"#000000\"});};const onCategoryUpdate=category=>{setEditCategory(category);};const onCategoryDelete=category=>{setDeleteCategory(category);};const createCategory=async category=>{try{const newCategory=await categoryService.createCategory(category);setIsSuccess(true);setMessage(newCategory.message);setCategories(prev=>{return[...prev,newCategory.data];});}catch(err){setIsError(true);setMessage(err);}setAddCategory(null);};const updateCategory=async category=>{try{const updatedCategory=await categoryService.updateCategory(category);setIsSuccess(true);setMessage(updatedCategory.message);setCategories(prev=>{const index=prev.findIndex(x=>x.id===updatedCategory.data.id);prev[index]=updatedCategory.data;return prev;});}catch(err){setIsError(true);setMessage(err);}setEditCategory(null);};const removeCategory=async category=>{try{const newBlog=await categoryService.deleteCategory(category.id);setIsSuccess(true);setMessage(newBlog.message);setCategories(prev=>prev.filter(x=>x.id!==category.id));}catch(err){setIsError(true);setMessage(err);}setDeleteCategory(null);};const AddButton=()=>{if(!user||!user.token)return null;return/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-dark m-3\",onClick:onCategoryAdd,children:\"ADD CATEGORY\"});};if(loading){return/*#__PURE__*/_jsx(Loading,{});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Heading,{}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(\"p\",{className:\"page-subtitle\",children:\"Categories\"}),/*#__PURE__*/_jsx(AddButton,{})]}),/*#__PURE__*/_jsx(CategoryList,{categories:categories,onEdit:onCategoryUpdate,onDelete:onCategoryDelete})]}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(AddEditCategoryModal,{addCategory:addCategory,editCategory:editCategory,createCategory:createCategory,updateCategory:updateCategory,onClose:()=>{setAddCategory(null);setEditCategory(null);}}),/*#__PURE__*/_jsx(DeleteCategoryModal,{deleteCategory:deleteCategory,removeCategory:removeCategory,onClose:()=>setDeleteCategory(null)}),/*#__PURE__*/_jsx(SuccessToast,{show:isSuccess,message:message,onClose:()=>{setIsSuccess(false);setMessage(\"\");}}),/*#__PURE__*/_jsx(ErrorToast,{show:isError,message:message,onClose:()=>{setIsError(false);setMessage(\"\");}})]});}","map":{"version":3,"names":["React","useEffect","useState","Navbar","Heading","CategoryList","Footer","Loading","categoryService","SuccessToast","ErrorToast","AddEditCategoryModal","DeleteCategoryModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CategoriesPage","user","JSON","parse","localStorage","getItem","categories","setCategories","addCategory","setAddCategory","editCategory","setEditCategory","deleteCategory","setDeleteCategory","loading","setLoading","message","setMessage","isSuccess","setIsSuccess","isError","setIsError","fetchData","categoriesRes","fetchCategories","data","err","onCategoryAdd","title","description","color","onCategoryUpdate","category","onCategoryDelete","createCategory","newCategory","prev","updateCategory","updatedCategory","index","findIndex","x","id","removeCategory","newBlog","filter","AddButton","token","className","onClick","children","style","display","justifyContent","onEdit","onDelete","onClose","show"],"sources":["/Users/cutlass/Downloads/IX/ix-blog-app/frontend/src/pages/Categories/index.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport Navbar from \"../../components/Navbar\";\nimport Heading from \"../../components/Heading\";\nimport CategoryList from \"../../components/CategoryList\";\nimport Footer from \"../../components/Footer\";\nimport Loading from \"../../components/Loading\";\n\nimport categoryService from \"../../services/categoryService\";\nimport SuccessToast from \"../../components/SuccessToast\";\nimport ErrorToast from \"../../components/ErrorToast\";\nimport AddEditCategoryModal from \"../../components/AddEditCategoryModal\";\nimport DeleteCategoryModal from \"../../components/DeleteCategoryModal\";\n\nexport default function CategoriesPage() {\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n\n  const [categories, setCategories] = useState([]);\n  const [addCategory, setAddCategory] = useState();\n  const [editCategory, setEditCategory] = useState();\n  const [deleteCategory, setDeleteCategory] = useState();\n\n  const [loading, setLoading] = useState();\n  const [message, setMessage] = useState();\n  const [isSuccess, setIsSuccess] = useState();\n  const [isError, setIsError] = useState();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        const categoriesRes = await categoryService.fetchCategories();\n        setCategories(categoriesRes.data);\n        setLoading(false);\n      } catch (err) {\n        setIsError(true);\n        setMessage(err);\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const onCategoryAdd = () => {\n    setAddCategory({\n      title: \"\",\n      description: \"\",\n      color: \"#000000\",\n    });\n  };\n\n  const onCategoryUpdate = (category) => {\n    setEditCategory(category);\n  };\n\n  const onCategoryDelete = (category) => {\n    setDeleteCategory(category);\n  };\n\n  const createCategory = async (category) => {\n    try {\n      const newCategory = await categoryService.createCategory(category);\n      setIsSuccess(true);\n      setMessage(newCategory.message);\n      setCategories((prev) => {\n        return [...prev, newCategory.data];\n      });\n    } catch (err) {\n      setIsError(true);\n      setMessage(err);\n    }\n    setAddCategory(null);\n  };\n\n  const updateCategory = async (category) => {\n    try {\n      const updatedCategory = await categoryService.updateCategory(category);\n      setIsSuccess(true);\n      setMessage(updatedCategory.message);\n      setCategories((prev) => {\n        const index = prev.findIndex((x) => x.id === updatedCategory.data.id);\n        prev[index] = updatedCategory.data;\n        return prev;\n      });\n    } catch (err) {\n      setIsError(true);\n      setMessage(err);\n    }\n    setEditCategory(null);\n  };\n\n  const removeCategory = async (category) => {\n    try {\n      const newBlog = await categoryService.deleteCategory(category.id);\n      setIsSuccess(true);\n      setMessage(newBlog.message);\n      setCategories((prev) => prev.filter((x) => x.id !== category.id));\n    } catch (err) {\n      setIsError(true);\n      setMessage(err);\n    }\n    setDeleteCategory(null);\n  };\n\n  const AddButton = () => {\n    if (!user || !user.token) return null;\n    return (\n      <button className=\"btn btn-outline-dark m-3\" onClick={onCategoryAdd}>\n        ADD CATEGORY\n      </button>\n    );\n  };\n\n  if (loading) {\n    return <Loading />;\n  }\n\n  return (\n    <>\n      <Navbar />\n      <div className=\"container\">\n        <Heading />\n        <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n          <p className=\"page-subtitle\">Categories</p>\n          <AddButton />\n        </div>\n        <CategoryList\n          categories={categories}\n          onEdit={onCategoryUpdate}\n          onDelete={onCategoryDelete}\n        ></CategoryList>\n      </div>\n      <Footer />\n      <AddEditCategoryModal\n        addCategory={addCategory}\n        editCategory={editCategory}\n        createCategory={createCategory}\n        updateCategory={updateCategory}\n        onClose={() => {\n          setAddCategory(null);\n          setEditCategory(null);\n        }}\n      />\n      <DeleteCategoryModal\n        deleteCategory={deleteCategory}\n        removeCategory={removeCategory}\n        onClose={() => setDeleteCategory(null)}\n      />\n      <SuccessToast\n        show={isSuccess}\n        message={message}\n        onClose={() => {\n          setIsSuccess(false);\n          setMessage(\"\");\n        }}\n      />\n      <ErrorToast\n        show={isError}\n        message={message}\n        onClose={() => {\n          setIsError(false);\n          setMessage(\"\");\n        }}\n      />\n    </>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}